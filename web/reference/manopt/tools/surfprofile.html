<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of surfprofile</title>
  <meta name="keywords" content="surfprofile">
  <meta name="description" content="Plot the cost function as a surface over a 2-dimensional subspace.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">manopt</a> &gt; <a href="index.html">tools</a> &gt; surfprofile.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for manopt\tools&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>surfprofile
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Plot the cost function as a surface over a 2-dimensional subspace.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function costs = surfprofile(problem, x, d1, d2, t1, t2) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Plot the cost function as a surface over a 2-dimensional subspace.

 function surfprofile(problem, x, d1, d2, t1, t2)
 function costs = surfprofile(problem, x, d1, d2, t1, t2)

 Evaluates the cost function at points

   gamma(t1, t2) = exponential_x(t1*d1 + t2*d2)
 
 where the exponential map at x is specified by problem.M.exp (retr is
 used instead if needed). d1 and d2 are two tangent vectors to problem.M
 at the point x. The values assigned to t1 and t2 are as specified in the
 two input vectors t1 and t2.
 
 If the function is called with an output, the plot is not drawn and the
 values of the cost are returned in a matrix of size
 length(t1)*length(t2). To plot a surf, call surf(t1, t2, costs.') (notice
 the transpose).

 If x is omitted, a point is generated at random. If d1 is omitted, a
 random tangent vector at x is generated. If d2 is omitted, a random
 tangent vector at x is generated, orthogonally to d1. If t1, t2 are
 omitted, they are generated with linspace's in [-1, 1].</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../manopt/core/StoreDB.html" class="code" title="">StoreDB</a>	</li><li><a href="../../manopt/core/canGetCost.html" class="code" title="function candoit = canGetCost(problem)">canGetCost</a>	Checks whether the cost function can be computed for a problem structure.</li><li><a href="../../manopt/core/getCost.html" class="code" title="function cost = getCost(problem, x, storedb, key)">getCost</a>	Computes the cost function at x.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function costs = surfprofile(problem, x, d1, d2, t1, t2)</a>
0002 <span class="comment">% Plot the cost function as a surface over a 2-dimensional subspace.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% function surfprofile(problem, x, d1, d2, t1, t2)</span>
0005 <span class="comment">% function costs = surfprofile(problem, x, d1, d2, t1, t2)</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% Evaluates the cost function at points</span>
0008 <span class="comment">%</span>
0009 <span class="comment">%   gamma(t1, t2) = exponential_x(t1*d1 + t2*d2)</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% where the exponential map at x is specified by problem.M.exp (retr is</span>
0012 <span class="comment">% used instead if needed). d1 and d2 are two tangent vectors to problem.M</span>
0013 <span class="comment">% at the point x. The values assigned to t1 and t2 are as specified in the</span>
0014 <span class="comment">% two input vectors t1 and t2.</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% If the function is called with an output, the plot is not drawn and the</span>
0017 <span class="comment">% values of the cost are returned in a matrix of size</span>
0018 <span class="comment">% length(t1)*length(t2). To plot a surf, call surf(t1, t2, costs.') (notice</span>
0019 <span class="comment">% the transpose).</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% If x is omitted, a point is generated at random. If d1 is omitted, a</span>
0022 <span class="comment">% random tangent vector at x is generated. If d2 is omitted, a random</span>
0023 <span class="comment">% tangent vector at x is generated, orthogonally to d1. If t1, t2 are</span>
0024 <span class="comment">% omitted, they are generated with linspace's in [-1, 1].</span>
0025 
0026 <span class="comment">% This file is part of Manopt: www.manopt.org.</span>
0027 <span class="comment">% Original author: Nicolas Boumal, Sep. 1, 2014.</span>
0028 <span class="comment">% Contributors:</span>
0029 <span class="comment">% Change log:</span>
0030 <span class="comment">%</span>
0031 <span class="comment">%   April 3, 2015 (NB):</span>
0032 <span class="comment">%       Works with the new StoreDB class system.</span>
0033 <span class="comment">%</span>
0034 <span class="comment">%   Nov. 12, 2016 (NB):</span>
0035 <span class="comment">%       Most inputs are now optional.</span>
0036 
0037     <span class="comment">% Verify that the problem description is sufficient.</span>
0038     <span class="keyword">if</span> ~<a href="../../manopt/core/canGetCost.html" class="code" title="function candoit = canGetCost(problem)">canGetCost</a>(problem)
0039         error(<span class="string">'It seems no cost was provided.'</span>);  
0040     <span class="keyword">end</span>
0041     
0042 
0043     <span class="keyword">if</span> ~exist(<span class="string">'x'</span>, <span class="string">'var'</span>) || isempty(x)
0044         x = problem.M.rand();
0045         <span class="keyword">if</span> (exist(<span class="string">'d1'</span>, <span class="string">'var'</span>) &amp;&amp; ~isempty(d1)) || <span class="keyword">...</span>
0046            (exist(<span class="string">'d2'</span>, <span class="string">'var'</span>) &amp;&amp; ~isempty(d2))
0047             error(<span class="string">'If x is omitted, d1, d2 should not be specified.'</span>);
0048         <span class="keyword">end</span>
0049     <span class="keyword">end</span>
0050     <span class="keyword">if</span> ~exist(<span class="string">'d1'</span>, <span class="string">'var'</span>) || isempty(d1)
0051         d1 = problem.M.randvec(x);
0052     <span class="keyword">end</span>
0053     <span class="keyword">if</span> ~exist(<span class="string">'d2'</span>, <span class="string">'var'</span>) || isempty(d2)
0054         d2 = problem.M.randvec(x);
0055         <span class="comment">% Make it orthogonal to d1</span>
0056         coeff = problem.M.inner(x, d1, d2) / problem.M.inner(x, d1, d1);
0057         d2 = problem.M.lincomb(x, 1, d2, -coeff, d1);
0058     <span class="keyword">end</span>
0059     <span class="keyword">if</span> ~exist(<span class="string">'t1'</span>, <span class="string">'var'</span>) || isempty(t1)
0060         t1 = linspace(-1, 1, 51);
0061     <span class="keyword">end</span>
0062     <span class="keyword">if</span> ~exist(<span class="string">'t2'</span>, <span class="string">'var'</span>) || isempty(t2)
0063         t2 = linspace(-1, 1, 51);
0064     <span class="keyword">end</span>
0065     
0066     
0067     <span class="keyword">if</span> isfield(problem.M, <span class="string">'exp'</span>)
0068         expo = problem.M.exp;
0069         str = <span class="string">'Exp'</span>;
0070     <span class="keyword">else</span>
0071         expo = problem.M.retr;
0072         str = <span class="string">'Retr'</span>;
0073     <span class="keyword">end</span>
0074     
0075     storedb = <a href="../../manopt/core/StoreDB.html" class="code" title="">StoreDB</a>();
0076     linesearch_fun = @(ta, tb) <a href="../../manopt/core/getCost.html" class="code" title="function cost = getCost(problem, x, storedb, key)">getCost</a>(problem, <span class="keyword">...</span>
0077                          expo(x, problem.M.lincomb(x, ta, d1, tb, d2)), <span class="keyword">...</span>
0078                          storedb);
0079     
0080     costs = zeros(length(t1), length(t2));
0081     <span class="keyword">for</span> i = 1 : length(t1)
0082         <span class="keyword">for</span> j = 1 : length(t2)
0083             costs(i, j) = linesearch_fun(t1(i), t2(j));
0084         <span class="keyword">end</span>
0085     <span class="keyword">end</span>
0086     
0087     <span class="keyword">if</span> nargout == 0
0088         surf(t1, t2, costs.');
0089         xlabel(<span class="string">'t1'</span>);
0090         ylabel(<span class="string">'t2'</span>);
0091         zlabel([<span class="string">'f('</span> str <span class="string">'_x(t1*d1+t2*d2))'</span>]);
0092     <span class="keyword">end</span>
0093     
0094 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Mon 10-Sep-2018 11:48:06 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>